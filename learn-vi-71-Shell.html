<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" xml:lang="zh">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" type="text/css" href="learn-vi.css" />
	<title>VIM学习笔记  运行外部命令(shell Command)</title>
</head>
<body>
	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">执行外部命令</p>
	<p>使用<code class="inset">:!</code>命令，可以运行一个外部系统命令。例如，以下命令将打开终端窗口，并在其中显示当前日期：</p>
	<p style="text-indent:2em"><code class="inset">:!date</code></p>

	<p>使用<code class="inset">:!!</code>命令，可以重新执行最近一次运行过的命令。</p>
	
	<p>使用<code class="inset">!!</code>命令，可以运行外部命令并将输出结果做为当前行的内容。例如，输入<code class="inset">!!date</code>命令，将会把date命令的输出结果插入到文件中，当前行中的原有内容将会被覆盖。</p>

	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">读取命令输出</p>
	<p>在常规模式下，使用<code class="inset">:read</code>命令，可以读取命令执行的输出结果。例如以下命令，将在当前行之下新增一行并插入当前日期。</p>
	<p style="text-indent:2em"><code class="inset">:read!date</code> (For Linux)</p>
	<p style="text-indent:2em"><code class="inset">:read!date /t</code> (For Windows)</p>

	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">调用命令终端</p>
	<p>使用<code class="inset">:shell</code>命令，不需要退出Vim，就可以打开操作系统的命令终端窗口，并在其中执行一个或多个Shell命令。在终端中使用<code class="inset">exit</code>命令，则可以退回到Vim。</p>
	<p><a href="https://www.flickr.com/photos/yyq123/46120956205/in/dateposted/" title="shell"><img src="https://farm5.staticflickr.com/4818/46120956205_a0f94f3ebb.jpg" width="500" height="250" alt="shell" /></a></p>
	<p>使用Vim8引入的<code class="inset">:terminal</code>命令，将在新建的水平分割窗口中进入命令终端。也可以使用<code class="inset">:vertical :term</code>命令，在新建的垂直分割窗口中进入命令终端。而使用<code class="inset">:tab term</code>命令，则可以在新建标签页中进入命令终端。</p>
	<p><a href="https://www.flickr.com/photos/yyq123/46310562294/in/dateposted/" title="terminal"><img src="https://farm8.staticflickr.com/7892/46310562294_2d22cd2d1a.jpg" width="500" height="408" alt="terminal" /></a></p>
	<p>如果无法正常调用:terminal命令，那么请使用<code class="inset">:version</code>命令，查看是否包含<kbd>+terminal</kbd>关键字，以确认在当前版本Vim中已启用此特性。</p>
	<p><a href="https://www.flickr.com/photos/yyq123/46120956155/in/dateposted/" title="terminal_version"><img src="https://farm8.staticflickr.com/7823/46120956155_978400c8cf.jpg" width="500" height="194" alt="terminal_version" /></a></p>
	<p>在命令终端中，点击<kbd>Ctrl-\-N</kbd>快捷键，将从Terminal-Job模式切换至Terminal-Normal模式。在Terminal-Normal模式下，可以像在Vim常规模式下一样，使用光标键或命令来移动光标，也可以使用鼠标或命令来选择和复制文本，以便于将命令输出复制到其他文件。点击<kbd>i</kbd>键，则可以返回Terminal-Job模式，继续执行命令。</p>
	<p><a href="https://www.flickr.com/photos/yyq123/40069992173/in/dateposted/" title="terminal_NormalMode"><img src="https://farm8.staticflickr.com/7809/40069992173_1e734f5a32.jpg" width="500" height="350" alt="terminal_NormalMode" /></a></p>

	<table summary="Commands" border="2" frame="hsides" rules="all" cellspacing="0" cellpadding="3">
		<caption>命令小结</caption>
		<tr><td><code class="inset">:!</code></td><td>运行外部命令</td></tr>
		<tr><td><code class="inset">:!!</code></td><td>重新执行最近一次运行过的命令</td></tr>
		<tr><td><code class="inset">!!</code></td><td rowspan="2">运行外部命令并将输出结果做为当前行的内容</td></tr>
		<tr><td><code class="inset">:read</code></td></tr>
		<tr><td><code class="inset">:shell</code></td><td rowspan="2">打开命令终端</td></tr>
		<tr><td><code class="inset">:terminal</code></td></tr>
	</table>
	<p style="border-top:1px solid lightgray"><span style="float:right">Ver: 2.0&nbsp;|&nbsp;<a href="mailto:yyq123@gmail.com">YYQ</a></span><span>&lt;<a title="寄存器（Regists）" href="http://yyq123.github.io/learn-vim/learn-vi-12-Register.html">上一篇</a>&nbsp;|<a title="笔记列表" href="http://yyq123.github.com/learn-vim/learn-vi-00-List.html">&nbsp;目录&nbsp;</a>|&nbsp;<a title="重复命令（Dot Command）" href="http://yyq123.github.io/learn-vim/learn-vi-20-DotCommand.html">下一篇</a>&gt;</span></p>
</html>

